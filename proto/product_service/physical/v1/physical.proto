// github.com/mikhail5545/proto-go
// shared proto module for vitainmove project microservices
// Copyright (C) 2025  Mikhail Kulik

// This program is free software: you can redistribute it and/or modify
// it under the terms of the GNU Affero General Public License as published
// by the Free Software Foundation, either version 3 of the License, or
// (at your option) any later version.

// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU Affero General Public License for more details.

// You should have received a copy of the GNU Affero General Public License
// along with this program.  If not, see <https://www.gnu.org/licenses/>.

syntax = "proto3";

package physical.v1;

import "product_service/product/v0/product.proto";
import "product_service/variant/v0/variant.proto";

import "google/protobuf/field_mask.proto";
import "google/protobuf/empty.proto";

option go_package = "github.com/mikhail5545/proto-go/proto/product_service/physical/v1;physicalpb";

message CreateRequest{
  string title = 1;
  optional string slug = 2;
  optional string subtitle = 3;
  string short_description = 4;
  repeated string tags = 5;
  bytes admin_uuid = 6;
  string admin_name = 7;
  string note = 8;
}

message CreateResponse{
  product.v0.Product product = 1;
}

message UpdateRequest{
  bytes uuid = 1;
  optional string title = 2;
  optional string slug = 3;
  bool regenerate_slug = 4;
  optional string subtitle = 5;
  optional string description = 6;
  optional string short_description = 7;
  repeated string tags = 8;
  optional string metadata = 9;
  optional string meta_title = 10;
  optional string meta_description = 11;
  optional google.protobuf.FieldMask updates = 12;
}

message UpdateResponse{
  bytes uuid = 1;
  optional string title = 2;
  optional string slug = 3;
  optional string subtitle = 4;
  optional string description = 5;
  optional string short_description = 6;
  repeated string tags = 7;
  optional string metadata = 8;
  optional string meta_title = 9;
  optional string meta_description = 10;
  optional google.protobuf.FieldMask updates = 11;
}

message CreateVariantRequest{
  bytes product_uuid = 1;
  string title = 2;
  optional string sku = 3;

  int32 inventory_quantity = 4;

  int32 weight_gram = 5;
  string hs_code = 6;

  optional string option1 = 7;
  optional string option2 = 8;
  optional string option3 = 9;

  bytes admin_uuid = 10;
  string admin_name = 11;
  string note = 12;
}

message CreateVariantResponse{
  variant.v0.Variant variant = 1;
}

message UpdateVariantRequest{
  bytes uuid = 1;
  optional string title = 2;
  optional string sku = 3;
  bool regenerate_sku = 4;

  optional int32 inventory_quantity = 5;
  optional variant.v0.VariantInventoryPolicy inventory_policy = 12;
  optional bool allow_backorder = 13;

  optional int32 weight_gram = 6;
  optional string hs_code = 7;

  optional string option1 = 8;
  optional string option2 = 9;
  optional string option3 = 10;

  optional google.protobuf.FieldMask updates = 11;
}

message UpdateVariantResponse{
  bytes uuid = 1;
  optional string title = 2;
  optional string sku = 3;

  optional int32 inventory_quantity = 4;
  optional variant.v0.VariantInventoryPolicy inventory_policy = 11;
  optional bool allow_backorder = 12;

  optional int32 weight_gram = 5;
  optional string hs_code = 6;

  optional string option1 = 7;
  optional string option2 = 8;
  optional string option3 = 9;

  optional google.protobuf.FieldMask updates = 10;
}

message ChangeStateRequest {
  bytes uuid = 1;
  optional string note = 2;
  bytes admin_uuid = 3;
  string admin_name = 4;
}

message PingResponse {
  int64 timestamp = 1;
}

service PhysicalService{
  rpc Ping(google.protobuf.Empty) returns (PingResponse);
  rpc Create(CreateRequest) returns (CreateResponse);
  rpc Update(UpdateRequest) returns (UpdateResponse);
  rpc CreateVariant(CreateVariantRequest) returns (CreateVariantResponse);
  rpc UpdateVariant(UpdateVariantRequest) returns (UpdateVariantResponse);
  rpc Publish(ChangeStateRequest) returns (google.protobuf.Empty);
}