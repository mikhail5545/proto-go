// github.com/mikhail5545/proto-go
// shared proto module for vitainmove project microservices
// Copyright (C) 2025  Mikhail Kulik

// This program is free software: you can redistribute it and/or modify
// it under the terms of the GNU Affero General Public License as published
// by the Free Software Foundation, either version 3 of the License, or
// (at your option) any later version.

// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU Affero General Public License for more details.

// You should have received a copy of the GNU Affero General Public License
// along with this program.  If not, see <https://www.gnu.org/licenses/>.

syntax = "proto3";

package product.v0;

import "google/protobuf/timestamp.proto";
import "google/protobuf/any.proto";

import "product_service/variant/v0/variant.proto";
import "product_service/category/v0/category.proto";
import "product_service/collection/v0/collection.proto";

option go_package = "github.com/mikhail5545/proto-go/proto/product_service/product/v0;productpb";

enum ProductType{
    TYPE_PHYSICAL_GOOD = 0;
    TYPE_COURSE = 1;
    TYPE_TRAINING = 2;
    TYPE_SEMINAR = 3;
    TYPE_BUNDLE = 4;
}

enum ProductStatus{
    STATUS_ACTIVE = 0;
    STATUS_DRAFT = 1;
    STATUS_ARCHIVED = 2;
}

message Product{
    string id = 1;
    google.protobuf.Timestamp created_at = 2;
    google.protobuf.Timestamp updated_at = 3;
    optional google.protobuf.Timestamp deleted_at = 4;
    // URL-friendly identifier for the product.
    string slug = 5;
    // The main title of the product.
    string title = 6;
    // An optional subtitle for the product.
    optional string subtitle = 7;
    // Detailed product description, can be Markdown or HTML.
    optional string description = 8;
    // A brief summary of the product.
    optional string short_description = 9;
    // The type of the product (e.g., physical_good, course).
    ProductType product_type = 10;
    // The current status of the product (e.g., draft, active).
    ProductStatus status = 11;
    // A list of tags for filtering and organization.
    repeated string tags = 12;
    // Flexible key/value pairs for custom data.
    optional string metadata = 13;

    // SEO title for search engines.
    optional string meta_title = 14;
    // SEO description for search engines.
    optional string meta_description = 15;

    // Start date and time for event-type products.
    optional google.protobuf.Timestamp event_starts_at = 16;
    // End date and time for event-type products.
    optional google.protobuf.Timestamp event_ends_at = 17;
    // Location of the event.
    optional string venue = 18;
    // Maximum number of attendees for the event.
    optional int32 max_seats = 19;
    // Number of seats already booked.
    optional int32 booked_seats = 20;
    // Timezone of the event.
    optional string timezone = 21;

    // Product variants (e.g., size, color).
    repeated variant.v0.Variant variants = 22;
    // Associated product images.
    repeated ProductImage images = 23;
    // Categories the product belongs to.
    repeated category.v0.Category categories = 24;
    // Collections the product is part of.
    repeated collection.v0.Collection collections = 25;
}

message ProductImage{
    string product_id = 1;
    string image_id = 2;
    int32 position = 3;
    string alt = 4;
    optional string variant_id = 5;
}

message GetRequest{
    string id = 1;
    optional string option = 2;
    optional google.protobuf.Any value = 3;
    optional string market = 4;
}

message GetResponse{
    Product product = 1;
}

message GetWithDeletedRequest{
    string id = 1;
    optional string option = 2;
    optional google.protobuf.Any value = 3;
    optional string market = 4;
}

message GetWithDeletedResponse{
    Product product = 1;
}

message GetWithDratRequest{
    string id = 1;
    optional string option = 2;
    optional google.protobuf.Any value = 3;
    optional string market = 4;
}

message GetWithDratResponse{
    Product product = 1;
}

message ListRequest{
    int32 limit = 1;
    int32 offset = 2;
    optional string option = 3;
    optional google.protobuf.Any value = 4;
    optional string market = 5;
}

message ListResponse{
    repeated Product products = 1;
    int64 total = 2;
}

message ListDraftsRequest{
    int32 limit = 1;
    int32 offset = 2;
    optional string option = 3;
    optional google.protobuf.Any value = 4;
    optional string market = 5;
}

message ListDraftsResponse{
    repeated Product products = 1;
    int64 total = 2;
}

message ListDeletedRequest{
    int32 limit = 1;
    int32 offset = 2;
    optional string option = 3;
    optional google.protobuf.Any value = 4;
    optional string market = 5;
}

message ListDeletedResponse{
    repeated Product products = 1;
    int64 total = 2;
}

message AddCategoryRequest{
    string id = 1;
    string category_id = 2;
}

message AddCategoryResponse{
    string id = 1;
    string category_id = 2;
}

message AddCollectionRequest{
    string id = 1;
    string collection_id = 2;
}

message AddCollectionResponse{
    string id = 1;
    string collection_id = 2;
}

message RemoveCategoryRequest{
    string id = 1;
    string category_id = 2;
}

message RemoveCategoryResponse{
    string id = 1;
    string category_id = 2;
}

message RemoveCollectionRequest{
    string id = 1;
    string collection_id = 2;
}

message RemoveCollectionResponse{
    string id = 1;
    string collection_id = 2;
}

message ArchiveRequest{
    string id = 1;
}

message ArchiveResponse{
    string id = 1;
}

message UnarchiveRequest{
    string id = 1;
}

message UnarchiveResponse{
    string id = 1;
}

service ProductService{
    rpc Get(GetRequest) returns (GetResponse) {}
    rpc GetWithDraft(GetWithDratRequest) returns (GetWithDratResponse) {}
    rpc GetWithDeleted(GetWithDeletedRequest) returns (GetWithDeletedResponse) {}
    rpc List(ListRequest) returns (ListResponse) {}
    rpc ListDrafts(ListDraftsRequest) returns (ListDraftsResponse) {}
    rpc ListDeleted(ListDeletedRequest) returns (ListDeletedResponse){}
    rpc AddCategory(AddCategoryRequest) returns (AddCategoryResponse) {}
    rpc RemoveCategory(RemoveCategoryRequest) returns (RemoveCategoryResponse) {}
    rpc AddCollection(AddCollectionRequest) returns (AddCollectionResponse) {}
    rpc RemoveCollection(RemoveCollectionRequest) returns (RemoveCollectionResponse) {}
    rpc Archive(ArchiveRequest) returns (ArchiveResponse) {}
    rpc Unarchive(UnarchiveRequest) returns (UnarchiveResponse) {}
}